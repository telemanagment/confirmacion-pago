<<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Confirmando Pago...</title>
  <script>
    window.onload = () => {
      const url = new URL(window.location.href);
      const chat_id = url.searchParams.get("chat_id");
      const token = url.searchParams.get("token");
      const texto = url.searchParams.get("texto");

      if (chat_id && token && texto) {
        fetch(`https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${texto}`)
          .then(response => response.json())
          .then(data => {
            document.body.innerHTML = "<h2>✅ Pago confirmado exitosamente</h2>";
            setTimeout(() => {
              window.close();
            }, 1500);
          })
          .catch(error => {
            document.body.innerHTML = "<h2>❌ Error al confirmar el pago</h2>";
            console.error(error);
          });
      } else {
        document.body.innerHTML = "<h2>❌ Faltan parámetros</h2>";
      }
    };
  </script>
</head>
<body>
  <h2>⏳ Confirmando pago...</h2>
</body>
</html>